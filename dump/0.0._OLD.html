<script>
var a="button",
	A="<",
    B=A+a+" type='"+a,
	b=B+"' id='",
	c="'></"+a+">",
    D="<p id='",
    d="style",
    E="'></p>",
    e=":20px;",
    f="<br>",
    F=[],//collisionID
    g="----",
    h=[37,39,40,38,90,88],
    H="",
    i,j,
    l,
    J,
    L=[0,4,8,12,14,16,18,4,4,4,2,2,2,1],
    k=0,
    K=1,
    n=["#9400D3","orange","blue","#32cd32","red","#87CEFA","yellow","#bd89d3","#e2c389","#8989e2","#9bd19b","#e28989","#b8d1e1","#e2e289","#d3d3d3"],
    O="32323232",
    o="0000111122223344556"+O+O+"142",
    s=[1,5,0,1,5,0,1,5,0],
    T=[],
    u=[0,1,2,3,10,11,12,20,21,30],
    x=0,
    end;
var t="0125045714561458012401582456047801260147045615781245045801561457047901230145";
var r=function(p){return Math.floor((Math.random()*p));};
s[2]=u[r(7)];s[5]=u[r(7)];s[8]=u[r(7)];
var w=function(W,V,U,N){return -10+(W*10)+V-(T[(U*4)+N]);}
var C=function(Y,X,N){
	if(N===0){document.getElementById(Y).style.background=n[X];}
    else{document.getElementById("a"+Y).style.background=n[X];}
};
var S=function(W,V,U,R){
	for(i=0;i<4;i++){
    	Q=w(W,V,U,i);
    	if(R<2){C(Q,o.charAt(U)*1+(R*7),0);}
        else if(R===2){C(Q,14,0);}
        else if(R===3){C(Q,o.charAt(U),1);}
        else if(R===4){C(Q,14,1);}
    }
};
var y=function(W,V,U){	if(F.includes(w(W,V,U,0))||F.includes(w(W,V,U,1))||F.includes(w(W,V,U,2))||F.includes(w(W,V,U,3)))
    {return true;}else{return false;}
};
for(i=0;i<t.length;i++){T[i]=u[t.charAt(i)*1];}
document.write("<body onkeydown='P(event)'>"+A+d+">"+a+"{background: "+n[14]+";width"+e+"height"+e+"} #e{font-size:45px;}"+"</"+d+">"+"<table><td>");
for(i=0;i<20;i++){
	for(j=0;j<10;j++){
    	document.write(b+k+c);k++;
	}document.write(f);
}k=-1;
for(i=0;i<4;i++){
	for(j=0;j<10;j++){
    	document.write(D+k+E);k--;
	}
}k=0;
document.write("</td><td><p id='e'>TETRIS!</p>By Gem Games 2020"+f+f+"Next"+g+g+g+" Hold"+f);
//get rid of p tags
for(i=0;i<4;i++){
	for(j=0;j<10;j++){
    	document.write(b+"a"+k+c);
        k++;
    }document.write(f);
}
document.write("</td></table></body>");
S(s[0],s[1],s[2],0);
var P=function(event){
	var m=function(z){if(event.keyCode===h[z]){return true;}else{return false;}};
    var N=function(z,U,X){
    	if(o.charAt(s[z])!=="5"){S(3,3+X,L[o.charAt(s[z])],U);}
else{S(4,2+X,L[o.charAt(s[z])],U);}
    }
    var v=function(){
    	N(5,4,0);
        K=1;
    	s[0]--;
       	S(s[0],s[1],s[2],0);
        for(i=0;i<4;i++){F.push(w(s[0],s[1],s[2],i));}
        s[0]=s[3];s[1]=s[4];s[2]=s[5];
        s[5]=u[r(7)];
        N(5,3,0);
        for(j=0;j<20;j++){
        	for(i=0;i<10;i++){ if(F.includes(j*10+i)===false){
        	    	break;
        	    }
        	}if(i===10){S(1,1,1,1);}
        }
    }
    var q=function(){
    	for(i=0;i<21;i++){
    	if(y(i,s[1],s[2])){break;}x=i;}
    }
    if(y(1,6,17)){
    	document.getElementById("e").innerHTML="Game Over!";
    }
	S(s[0],s[1],s[2],2);
    S(x,s[1],s[2],2);
    if(m(0)){s[1]--;}
    if(m(1)){s[1]++;}
    if(m(2)){s[0]++;}
    if(m(4)){
    	s[2]++;
        if(s[2]===L[(o.charAt(s[2])*1)]){
        	s[2]=L[(o.charAt(s[2])*1)-1];
        }
    }
    if(m(5)&&K){
    	K=0;
    	N(8,4,5);
    	s[0]=1;s[1]=5;J=s[2];s[2]=s[8];s[8]=J;
    }
    if(s[1]===10||s[1]===o[s[2]+19]-2){
    	if(m(0)||m(4)){s[1]++;}
    	if(m(1)){s[1]--;}
    }
    if(y(s[0],s[1],s[2])){
    	if(m(0)){s[1]++;}
    	if(m(1)){s[1]--;}
        if(m(2)){v();}
    }
    if(s[0]===21&&m(2)){
    	v();
    }
    q();
    S(i-1,s[1],s[2],1);
    if(m(3)){
    	s[0]=x+1;
        v();q();
    }
    S(s[0],s[1],s[2],0);
    N(5,3,0);N(8,3,5);
};
</script>
<!--
variables free:
##########################
########I##L##############
-->
