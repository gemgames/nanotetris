<script>var i,j,l,J,end,a="button",A="<",B=A+a+" type='"+a,b=B+"' id='",c="'></"+a+">",D="<p id='",d="style",E="'></p>",e=":20px;",f="<br>",F=[],g="----",h=[37,39,40,38,90,88],H="",L=[0,4,8,12,14,16,18,4,4,4,2,2,2,1],k=0,K=1,n=["black","#707070","#d3d3d3"],O="32323232",o="0000111122223344556"+O+O+"142",s=[1,5,0,1,5,0,1,5,0],T=[],uu=[0,1,2,3,10,11,12,20,21,30],x=0,t="0125045714561458012401582456047801260147045615781245045801561457047901230145",u=[],tp=2,zz=0,pl="",ng="New Game",m=function(){for(i=0;i<20;i++)for(j=0;j<19;j++)u.push(j);u.sort(function(){return.5-Math.random()}),s[2]=u[0],s[5]=u[1],s[8]=u[40]},aa=function(i,s){document.getElementById(i).style.background=n[s]},ab=function(i){document.write(i)},ac=function(i,s){document.getElementById(i).innerHTML=s},w=function(i,s,t,n){return 10*i-10+s-T[4*t+n]},C=function(i,s,t){aa(0===t?i:"a"+i,s)},S=function(s,t,n,e){for(i=0;i<4;i++)Q=w(s,t,n,i),e<2?C(Q,e,0):2===e?C(Q,2,0):3===e?C(Q,0,1):4===e&&C(Q,2,1)},y=function(i,s,t){return F.includes(w(i,s,t,0))||F.includes(w(i,s,t,1))||F.includes(w(i,s,t,2))||F.includes(w(i,s,t,3))};for(i=0;i<t.length;i++)T[i]=uu[t.charAt(i)];for(ab("<body onkeydown='P(event)'>"+A+d+">"+a+"{border:0px;background: "+n[2]+";width"+e+"height"+e+"} #e{font-size:45px;}</"+d+"><table><td>"),i=0;i<20;i++){for(j=0;j<10;j++)ab(b+k+c),k++;ab(f)}for(k=-1,i=0;i<4;i++)for(j=0;j<10;j++)ab(D+k+E),k--;for(k=0,ab("</td><td><p id='e'>TETRIS!</p>By Gem Games (2020)"+f+b+"z' style='width:50%;'onclick='b()'>"+ng+"</"+a+">"+f+"Next"+g+g+g+" Hold"+f),i=0;i<4;i++){for(j=0;j<10;j++)ab(b+"a"+k+c),k++;ab(f)}ab("</td></table></body>"),g=!1;b=function(){if(g){for(g=!1,i=0;i<200;i++)aa(i,14);for(i=0;i<40;i++)aa("a"+i,14);F=[];ac("z",ng)}else g=!0,m(),ac("z","Start Over")};var P=function(t,n){if(g){var e=function(i){return n?2==i:t.keyCode===h[i]},a=function(i,t,n){S("5"!==o.charAt(s[i])?3:4,"5"!==o.charAt(s[i])?3+n:2+n,L[o.charAt(s[i])],t)},r=function(){for(a(5,4,0),K=1,s[0]--,S(s[0],s[1],s[2],0),i=0;i<4;i++)F.push(w(s[0],s[1],s[2],i));for(s[0]=s[3],s[1]=s[4],s[2]=s[5],s[5]=u[tp],tp=tp+1===u.length?0:tp+1,a(5,3,0),j=0;j<20;j++){for(i=0;i<10&&!1!==F.includes(10*j+i);i++);if(10===i)for(i=j;i>0;i--)for(zz=0;zz<10;zz++)pl=10*i+zz,document.getElementById(pl).style.background=document.getElementById(pl-10).style.background,F[F.indexOf(pl)]=pl+10}},c=function(){for(i=s[0];i<21&&!y(i,s[1],s[2]);i++)x=i};y(1,6,17)&&ac("e","Game Over!"),S(s[0],s[1],s[2],2),S(x,s[1],s[2],2),e(0)&&s[1]--,e(1)&&s[1]++,e(2)&&s[0]++,e(4)&&(s[2]=s[2]+1===L[1*o.charAt(s[2])]?L[1*o.charAt(s[2])-1]:s[2]+1),e(5)&&K&&(K=0,a(8,4,5),s[0]=1,s[1]=5,J=s[2],s[2]=s[8],s[8]=J),10!=s[1]&&s[1]!=o[s[2]+19]-2||((e(0)||e(4))&&s[1]++,e(1)&&s[1]--),y(s[0],s[1],s[2])&&(e(0)&&s[1]++,e(1)&&s[1]--,e(2)&&r()),21===s[0]&&e(2)&&r(),c(),S(i-1,s[1],s[2],1),e(3)&&(s[0]=x+1,r(),c()),S(s[0],s[1],s[2],0),a(5,3,0),a(8,3,5)}},v=function(){g&&P(null,1)},dr=setInterval(v,700);</script>
